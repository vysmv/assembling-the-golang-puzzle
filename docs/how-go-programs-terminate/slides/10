defer откладывает выполнение функции до выхода из текущей функции.
Если в функции несколько defer, они выполняются 
по принципу LIFO (последний добавленный — выполняется первым).